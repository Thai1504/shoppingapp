<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Qu·∫£n L√Ω Mua S·∫Øm v2.0 - 4 Kh√°ch S·∫°n</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="description" content="·ª®ng d·ª•ng qu·∫£n l√Ω mua s·∫Øm cho 4 kh√°ch s·∫°n">
    <meta name="theme-color" content="#2c5aa0">
</head>
<body>
    <!-- Loading indicator -->
    <div id="loadingIndicator" class="loading">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i...</p>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üè® Qu·∫£n L√Ω Mua S·∫Øm v2.0</h1>
            <p>·ª®ng d·ª•ng d√†nh cho 4 kh√°ch s·∫°n</p>
            <button id="menuToggle" class="menu-toggle">‚ò∞</button>
        </div>

        <!-- Step 1: Date Selection -->
        <div class="selection-step" id="dateStep">
            <div class="step-header">
                <span class="step-number">1</span>
                <h2>üìÖ Ch·ªçn ng√†y mua s·∫Øm</h2>
            </div>
            <div class="date-input-wrapper">
                <input type="date" id="selectedDate" class="date-input" required>
                <button id="todayBtn" class="btn btn-secondary">H√¥m nay</button>
            </div>
        </div>

        <!-- Step 2: Hotel Selection -->
        <div class="selection-step" id="hotelStep">
            <div class="step-header">
                <span class="step-number">2</span>
                <h2>üè® Ch·ªçn kh√°ch s·∫°n</h2>
            </div>
            <div class="hotel-dropdown-wrapper">
                <select id="hotelSelect" class="hotel-dropdown">
                    <option value="">-- Ch·ªçn kh√°ch s·∫°n --</option>
                    <option value="36LS">üè® 36LS</option>
                    <option value="16TX">üè© 16TX</option>
                    <option value="55HT">üè™ 55HT</option>
                    <option value="49HG">üè¨ 49HG</option>
                </select>
            </div>
        </div>

        <!-- Step 3: Section Selection -->
        <div class="selection-step" id="sectionStep">
            <div class="step-header">
                <span class="step-number">3</span>
                <h2>üì¶ Ch·ªçn danh m·ª•c</h2>
            </div>
            <div class="section-tabs">
                <button class="section-tab" data-section="thit">
                    <span class="section-icon">ü•©</span>
                    <span class="section-name">Th·ªãt</span>
                </button>
                <button class="section-tab" data-section="rau">
                    <span class="section-icon">ü•¨</span>
                    <span class="section-name">Rau</span>
                </button>
                <button class="section-tab" data-section="dokho">
                    <span class="section-icon">üåæ</span>
                    <span class="section-name">ƒê·ªì kh√¥</span>
                </button>
            </div>
        </div>

        <!-- Current Selection Summary -->
        <div class="current-selection" id="currentSelection" style="display: none;">
            <div class="selection-summary">
                <span id="summaryDate" class="summary-item">üìÖ</span>
                <span id="summaryHotel" class="summary-item">üè®</span>
                <span id="summarySection" class="summary-item">üì¶</span>
                <button id="changeSelectionBtn" class="btn btn-link">Thay ƒë·ªïi</button>
            </div>
        </div>

        <!-- Item Entry Form -->
        <div class="item-entry" id="itemEntry" style="display: none;">
            <div class="form-header">
                <h3>‚ûï Th√™m s·∫£n ph·∫©m m·ªõi</h3>
            </div>
            
            <form id="itemForm" class="item-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="itemPool">Ch·ªçn t·ª´ danh s√°ch</label>
                        <select id="itemPool" class="form-select">
                            <option value="">-- Ch·ªçn s·∫£n ph·∫©m c√≥ s·∫µn --</option>
                        </select>
                    </div>
                </div>

                <div class="form-row form-row-compact">
                    <div class="form-group form-group-name">
                        <label for="itemName">T√™n s·∫£n ph·∫©m *</label>
                        <input type="text" id="itemName" class="form-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." required>
                    </div>
                    <div class="form-group form-group-quantity">
                        <label for="quantity">S·ªë l∆∞·ª£ng *</label>
                        <input type="number" id="quantity" class="form-input" value="1" step="0.1" min="0" required>
                    </div>
                    <div class="form-group form-group-unit">
                        <label for="unit">ƒê∆°n v·ªã *</label>
                        <select id="unit" class="form-select" required>
                            <option value="kg">kg</option>
                            <option value="gram">gram</option>
                            <option value="l√≠t">l√≠t</option>
                            <option value="chai">chai</option>
                            <option value="g√≥i">g√≥i</option>
                            <option value="c√°i">c√°i</option>
                            <option value="th√πng">th√πng</option>
                            <option value="h·ªôp">h·ªôp</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="buyPrice">Gi√° mua (‚Ç´)</label>
                        <input type="number" id="buyPrice" class="form-input" placeholder="0" min="0">
                    </div>
                    <div class="form-group">
                        <label for="sellPrice">Gi√° b√°n (‚Ç´)</label>
                        <input type="number" id="sellPrice" class="form-input" placeholder="0" min="0">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        ‚ûï Th√™m s·∫£n ph·∫©m
                    </button>
                    <button type="button" id="clearFormBtn" class="btn btn-secondary">
                        üóëÔ∏è X√≥a form
                    </button>
                </div>
            </form>
        </div>

        <!-- Items List -->
        <div class="items-list" id="itemsList" style="display: none;">
            <div class="list-header">
                <h3 id="listTitle">üìù Danh s√°ch s·∫£n ph·∫©m</h3>
                <div class="list-actions">
                    <button id="markAllDoneBtn" class="btn btn-sm btn-success">‚úì ƒê√°nh d·∫•u t·∫•t c·∫£</button>
                    <button id="clearDoneBtn" class="btn btn-sm btn-warning">üóëÔ∏è X√≥a ƒë√£ ho√†n th√†nh</button>
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="search-section">
                <input type="text" id="searchInput" class="search-input" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m...">
                <select id="statusFilter" class="filter-select">
                    <option value="all">T·∫•t c·∫£</option>
                    <option value="pending">Ch∆∞a ho√†n th√†nh</option>
                    <option value="done">ƒê√£ ho√†n th√†nh</option>
                </select>
            </div>

            <!-- Items Table -->
            <div class="table-container">
                <table class="items-table" id="itemsTable">
                    <thead>
                        <tr>
                            <th class="col-checkbox">‚úì</th>
                            <th class="col-name">T√™n s·∫£n ph·∫©m</th>
                            <th class="col-unit">ƒê∆°n v·ªã</th>
                            <th class="col-price">Gi√° mua</th>
                            <th class="col-price">Gi√° b√°n</th>
                            <th class="col-total">T·ªïng mua</th>
                            <th class="col-total">T·ªïng b√°n</th>
                            <th class="col-actions">Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="itemsTableBody">
                        <!-- Items will be populated here -->
                    </tbody>
                    <tfoot id="itemsTableFooter" style="display: none;">
                        <tr class="totals-row">
                            <td colspan="5" class="totals-label">
                                <strong>üìä T·ªïng c·ªông:</strong>
                            </td>
                            <td class="totals-buy">
                                <strong id="totalBuyAmount">0‚Ç´</strong>
                            </td>
                            <td class="totals-sell">
                                <strong id="totalSellAmount">0‚Ç´</strong>
                            </td>
                            <td class="totals-actions">
                                <span id="itemCount">0 s·∫£n ph·∫©m</span>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">üì¶</div>
                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</h4>
                <p>H√£y th√™m s·∫£n ph·∫©m ƒë·∫ßu ti√™n v√†o danh s√°ch!</p>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="menu-content">
            <div class="menu-header">
                <h3>Menu</h3>
                <button id="menuClose" class="menu-close">&times;</button>
            </div>
            <div class="menu-items">
                <button class="menu-item" data-action="export">
                    <span>üì•</span> Xu·∫•t d·ªØ li·ªáu
                </button>
                <button class="menu-item" data-action="import">
                    <span>üì§</span> Nh·∫≠p d·ªØ li·ªáu
                </button>
                <button class="menu-item" data-action="print">
                    <span>üñ®Ô∏è</span> In b√°o c√°o
                </button>
                <button class="menu-item" data-action="help">
                    <span>‚ùì</span> H∆∞·ªõng d·∫´n
                </button>
                <button class="menu-item" data-action="about">
                    <span>‚ÑπÔ∏è</span> Th√¥ng tin
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="fab" style="display: none;" title="Th√™m s·∫£n ph·∫©m nhanh">
        ‚ûï
    </button>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 id="confirmTitle">X√°c nh·∫≠n</h3>
            <p id="confirmMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën th·ª±c hi·ªán h√†nh ƒë·ªông n√†y?</p>
            <div class="modal-actions">
                <button id="confirmYes" class="btn btn-primary">C√≥</button>
                <button id="confirmNo" class="btn btn-secondary">Kh√¥ng</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Hidden file input for import -->
    <input type="file" id="fileInput" accept=".json" style="display: none;">

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>